---
import Analytics from "@vercel/analytics/astro";
import SpeedInsights from "@vercel/speed-insights/astro";

import "@/styles.css";
import BaseHead from "@/components/BaseHead.astro";
import PageHeader from "@/components/PageHeader.astro";
import PageFooter from "@/components/PageFooter.astro";

const currentLang = Astro.currentLocale || "en";
const isZh = currentLang === "zh";

interface Props {
  title?: string;
  description?: string;
  image?: ImageMetadata;
}

const { title, description, image } = Astro.props;

const defaultTitle = "idaibin.dev";
const defaultDescription = isZh
  ? "专注于 Rust、React 和现代全栈开发的技术博客，分享 Rustzen Admin 开源项目的构建经验"
  : "Tech blog focused on Rust, React and modern full-stack development, sharing Rustzen Admin open source project construction experience";
---

<!doctype html>
<html lang={currentLang}>
  <head>
    <BaseHead
      title={title || defaultTitle}
      description={description || defaultDescription}
      image={image}
    />
  </head>
  <body>
    <PageHeader />
    <slot />
    <PageFooter />
    <Analytics />
    <SpeedInsights />
  </body>
</html>
